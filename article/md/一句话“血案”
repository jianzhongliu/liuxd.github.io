### 一句话“血案” ###

+ LB没有把所有后端用到的头信息传递给app机器，导致app没有走varnish。
+ varnish没有对302、404、500等做跳过处理，导致缓存了这些错误的结果页面。某些错误码下要跳过varnish。
+ 页面js里面的一个URL做了修改，但老的URL被varnish缓存了，但后端已经没有这个URL的识别，导致404错误。页面内url变更要清理页面缓存。
+ 某台app机器的PHP内存设置比其他机器小了，导致图片处理报错，而且错误结果被squid缓存住了。app环境配置要一致，报错页面不应该缓存，报错信息应该封装，不要暴露服务器信息。
+ job的对游标文件的读写没有进行过滤和类型转换，导致错误的记录信息，和错误的读取，甚至有sql注入的危险。
+ nginx + php-fpm遇到502问题。分别查看nginx、php、php-fpm的error_log，如果发现：child exited on signal 11，说明php-fpm的worker进程处理请求失败了。最终解决是注释掉了一堆没用的扩展。
+ 设置缓存时写成数组累加的样子，而不是覆盖。导致要缓存的数组越来越大，引起内存爆表。
+ 同步线上信息的时候没有先pull，而是直接修改本地副本并覆盖线上内容。导致滞后信息覆盖线上正确的信息，造成404问题。
+ `nginx error “conflicting server name” ignored` 怎么找都找不到，最后发现是 `default~` 这个gedit产生的临时文件导致的。（如果include的时候限制扩展名的话就没这个问题了。）
